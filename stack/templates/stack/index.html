<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Story Stack</title>

    {% load staticfiles %}
    <link rel="stylesheet" type="text/css" href="{% static 'bootstrap/dist/css/bootstrap.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'stack/css/style.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'components-font-awesome/css/font-awesome.min.css' %}" />
</head>

<body>
<div class="container-fluid">
    <div id="page-heading">
        <p>STORYSTACK</p>
    </div>
    <div id="section-headers" class="row">
        <div class="flex-inline-text col-xs-9">
            <p>The Bank</p><p id="delete-counter"></p>
        </div>
        <div class="flex-separate-horizontal col-xs-3">
            <p>The Stack</p>
            <div id="stack-controls" class="btn-group" role="group" aria-label="Basic example">
                <button type="button" class="btn btn-secondary btn-centered"><i class="fa fa-floppy-o" aria-hidden="true"></i></button>
                <button type="button" class="btn btn-secondary btn-centered"><i class="fa fa-chevron-left" aria-hidden="true"></i></button>
                <button type="button" class="btn btn-secondary btn-centered"><i class="fa fa-share-alt" aria-hidden="true"></i></button>
            </div>
        </div>
    </div>
    <div id="body" class="row">
        {% for plot_point in request.session.current_hand %}
            {% if forloop.first %}
                <div class="heap col-xs-3">
            {% endif %}
            {% with counter_value=forloop.counter|stringformat:"s" %}
                <div id="{{ "heapDrop"|add:counter_value }}" class="drop-zone">
                    <div id="{{ 'plotPoint'|add:counter_value }}" data-plot-point-id="{{ plot_point.id }}" class="plot-point card card-block">
                        <div>
                            <p class="card-heading">Plot Point</p>
                            <p class="card-text">{{ plot_point.point_text }}</p>
                        </div>
                        <div>
                            <button class="delete-card-btn btn btn-centered btn-primary"><i class="fa fa-bomb" aria-hidden="true"></i></button>
                        </div>
                    </div>
                </div>
            {% endwith %}
            {% if forloop.counter|divisibleby:"3"  %}
                {% if not forloop.last %}
                    </div><div class="heap col-xs-3">
                {% else %}
                    </div>
                {% endif %}
            {% endif %}
        {% empty %}
            <h3>Sorry, no cards available.</h3>
        {%  endfor %}
        <div class="col-xs-3" id="stack">
            <div id="stackDrop1" class="bottom-bordered drop-zone"></div>
            <div id="stackDrop2" class="bottom-bordered drop-zone"></div>
            <div id="stackDrop3" class="bottom-bordered drop-zone"></div>
            <div id="stackDrop4" class="bottom-bordered drop-zone"></div>
            <div id="stackDrop5" class="bottom-no-border drop-zone"></div>
        </div>
    </div>
</div>

<script>
    {# Set javascript variable for requesting new cards to enable easier later changes to URL structure #}
    var plotPointRequestUrl = "{% url 'stack:new_plot_points' %}";
</script>
<script src="{% static 'jquery/dist/jquery.min.js' %}"></script>
<script src="{% static 'bootstrap/dist/js/bootstrap.min.js' %}"></script>
<script src="{% static 'velocity-animate/velocity.min.js' %}"></script>
<script src="{% static 'velocity-animate/velocity.ui.min.js' %}"></script>
<script src="{% static 'interact.js/interact.js' %}"></script>
<script src="{% static 'stack/js/helpers.js' %}"></script>
<script src="{% static 'stack/js/cardArea.js' %}"></script>
<script src="{% static 'stack/js/cardDrop.js' %}"></script>
<script src="{% static 'stack/js/draggable.js' %}"></script>
<script src="{% static 'stack/js/main.js' %}"></script>

</body>
</html>